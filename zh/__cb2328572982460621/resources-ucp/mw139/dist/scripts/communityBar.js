import{c as t}from"./WikiTools-BYl-hE6X.js";import{h as e}from"./dropdowns-DTtMfVlr.js";import{g as o,a as i}from"./tracking-Bcq7w0Z_.js";import{e as a}from"./events-D9QL1ZrV.js";import{E as n}from"./consts-eR6kglzq.js";import"./SearchModalInit-DsVpnA2v.js";import"./tslib.es6-DQsD9AwJ.js";import"./_create_class-qTAYELnC.js";function r(t,e){if(t){var o=e.querySelector('.mobile-community-bar__menu-item[data-path="'.concat(t,'"]'));o&&(c(e),o.classList.add("wds-is-active"))}}function c(t){t.querySelectorAll(".mobile-community-bar__menu-item.wds-is-active").forEach((function(t){return t.classList.remove("wds-is-active")}))}var m,s=document.querySelector(".mobile-community-bar__theme-indicator");function l(t){var i=t.querySelector(".wds-dropdown__toggle");if(i){var a=e(t);i.addEventListener("click",(function(e){(e.stopPropagation(),r("root",t),t.classList.contains("wds-is-active"))&&o()({category:"community-header",label:"nav-expanded"});!localStorage.getItem("mw_new_theme_switcher_indicator")&&s&&(localStorage.setItem("mw_new_theme_switcher_indicator","true"),s.classList.remove("mobile-community-bar__theme-indicator--visible"))}));var n=function(e){e.target.closest(".mobile-community-bar__navigation .wds-dropdown__content")||c(t)};return document.body.addEventListener("click",n),function(){document.body.removeEventListener("click",n),a&&a()}}}function u(){var e=document.querySelector(".mobile-community-bar"),o=document.querySelector(".mobile-community-bar__navigation > .wds-dropdown"),a=document.querySelector(".mobile-community-bar__theme-indicator");if(e&&function(t){t&&i(t,[{category:"community-header",selector:"[data-tracking-label]",label:function(t){return t.getAttribute("data-tracking-label")},name:"communityBar"}])}(e),o){!localStorage.getItem("mw_new_theme_switcher_indicator")&&a&&a.classList.add("mobile-community-bar__theme-indicator--visible"),m=l(o);o.addEventListener("click",(function(e){!function(t,e){var o=t.target.closest("ul.mobile-community-bar__menu-item a, .mobile-community-bar__menu-item ul a");o&&o.dataset.path&&(r(o.dataset.path,e),t.preventDefault(),t.stopPropagation())}(e,o),function(t,e){var o=t.target.closest(".mobile-community-bar__navigation-back");o&&o.dataset.path&&(r(o.dataset.path,e),t.preventDefault(),t.stopPropagation())}(e,o),t(e,12)})),function(t){t&&i(t,[{category:"mobile-theme",selector:".wiki-tools__theme-switch",label:function(t){return t.getAttribute("data-tracking")},name:"mobile-theme-switcher"}])}(o)}}a.on(n.communityBarRendered,(function(){u()})),a.on(n.communityBarDestroyed,(function(){m&&m()}));
